/**
 *  Copyright (c) 2014-2015, Facebook, Inc.
 *  All rights reserved.
 *
 *  This source code is licensed under the BSD-style license found in the
 *  LICENSE file in the root directory of this source tree. An additional grant
 *  of patent rights can be found in the PATENTS file in the same directory.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Seq={})}(this,function(t){"use strict";function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function r(t){return void 0===t.size&&(t.size=t.__iterate(o)),t.size}function n(t,e){if("number"!=typeof e){var n=+e;if(""+n!==e)return NaN;e=n}return 0>e?r(t)+e:e}function o(){return!0}function i(t){return f(t)?t:g(t)}function u(t){return s(t)?t:w(t)}function c(t){return h(t)?t:x(t)}function a(t){return f(t)&&!_(t)?t:I(t)}function f(t){return!(!t||!t[D])}function s(t){return!(!t||!t[O])}function h(t){return!(!t||!t[N])}function _(t){return s(t)||h(t)}function p(t){return!(!t||!t[C])}function y(t){this.next=t}function d(t,e,r,n){var o=0===t?e:1===t?r:[e,r];return n?n.value=o:n={value:o,done:!1},n}function v(){return{value:void 0,done:!0}}function l(t){return!!E(t)}function S(t){return t&&"function"==typeof t.next}function q(t){var e=E(t);return e&&e.call(t)}function E(t){var e=t&&(P&&t[P]||t[Q]);return"function"==typeof e?e:void 0}function b(t){return t&&"number"==typeof t.length}function g(t){return null===t||void 0===t?T():f(t)?t.toSeq():z(t)}function w(t){return null===t||void 0===t?T().toKeyedSeq():f(t)?s(t)?t.toSeq():t.fromEntrySeq():k(t)}function x(t){return null===t||void 0===t?T():f(t)?s(t)?t.entrySeq():t.toIndexedSeq():R(t)}function I(t){return(null===t||void 0===t?T():f(t)?s(t)?t.entrySeq():t:R(t)).toSetSeq()}function j(t){this._array=t,this.size=t.length}function m(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function A(t){this._iterable=t,this.size=t.length||t.size}function U(t){this._iterator=t,this._iteratorCache=[]}function M(t){return!(!t||!t[G])}function T(){return H||(H=new j([]))}function k(t){var e=Array.isArray(t)?new j(t).fromEntrySeq():S(t)?new U(t).fromEntrySeq():l(t)?new A(t).fromEntrySeq():"object"==typeof t?new m(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);
return e}function R(t){var e=K(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function z(t){var e=K(t)||"object"==typeof t&&new m(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function K(t){return b(t)?new j(t):S(t)?new U(t):l(t)?new A(t):void 0}function L(t,e,r,n){var o=t._cache;if(o){for(var i=o.length-1,u=0;i>=u;u++){var c=o[r?i-u:u];if(e(c[1],n?c[0]:u,t)===!1)return u+1}return u}return t.__iterateUncached(e,r)}function B(t,e,r,n){var o=t._cache;if(o){var i=o.length-1,u=0;return new y(function(){var t=o[r?i-u:u];return u++>i?v():d(e,n?t[0]:u-1,t[1])})}return t.__iteratorUncached(e,r)}e(u,i),e(c,i),e(a,i),i.isIterable=f,i.isKeyed=s,i.isIndexed=h,i.isAssociative=_,i.isOrdered=p,i.Keyed=u,i.Indexed=c,i.Set=a;var D="@@__IMMUTABLE_ITERABLE__@@",O="@@__IMMUTABLE_KEYED__@@",N="@@__IMMUTABLE_INDEXED__@@",C="@@__IMMUTABLE_ORDERED__@@",V=0,F=1,Y=2,P="function"==typeof Symbol&&Symbol.iterator,Q="@@iterator",X=P||Q;y.prototype.toString=function(){return"[Iterator]"},y.KEYS=V,y.VALUES=F,y.ENTRIES=Y,y.prototype.inspect=y.prototype.toSource=function(){return""+this},y.prototype[X]=function(){return this},e(g,i),g.of=function(){return g(arguments)},g.prototype.toSeq=function(){return this},g.prototype.toString=function(){return this.__toString("Seq {","}")},g.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},g.prototype.__iterate=function(t,e){return L(this,t,e,!0)},g.prototype.__iterator=function(t,e){return B(this,t,e,!0)},e(w,g),w.prototype.toKeyedSeq=function(){return this},e(x,g),x.of=function(){return x(arguments)},x.prototype.toIndexedSeq=function(){return this},x.prototype.toString=function(){return this.__toString("Seq [","]")},x.prototype.__iterate=function(t,e){return L(this,t,e,!1)},x.prototype.__iterator=function(t,e){return B(this,t,e,!1)},e(I,g),I.of=function(){return I(arguments)},I.prototype.toSetSeq=function(){
return this},g.isSeq=M,g.Keyed=w,g.Set=I,g.Indexed=x;var G="@@__IMMUTABLE_SEQ__@@";g.prototype[G]=!0,e(j,x),j.prototype.get=function(t,e){return this.has(t)?this._array[n(this,t)]:e},j.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,o=0;n>=o;o++)if(t(r[e?n-o:o],o,this)===!1)return o+1;return o},j.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,o=0;return new y(function(){return o>n?v():d(t,o,r[e?n-o++:o++])})},e(m,w),m.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},m.prototype.has=function(t){return this._object.hasOwnProperty(t)},m.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,o=n.length-1,i=0;o>=i;i++){var u=n[e?o-i:i];if(t(r[u],u,this)===!1)return i+1}return i},m.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,o=n.length-1,i=0;return new y(function(){var u=n[e?o-i:i];return i++>o?v():d(t,u,r[u])})},m.prototype[C]=!0,e(A,x),A.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=this._iterable,n=q(r),o=0;if(S(n))for(var i;!(i=n.next()).done&&t(i.value,o++,this)!==!1;);return o},A.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterable,n=q(r);if(!S(n))return new y(v);var o=0;return new y(function(){var e=n.next();return e.done?e:d(t,o++,e.value)})},e(U,x),U.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,n=this._iteratorCache,o=0;n.length>o;)if(t(n[o],o++,this)===!1)return o;for(var i;!(i=r.next()).done;){var u=i.value;if(n[o]=u,t(u,o++,this)===!1)break}return o},U.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,o=0;return new y(function(){if(o>=n.length){var e=r.next();if(e.done)return e;n[o]=e.value}return d(t,o,n[o++])})};var H;t.Seq=g,t.KeyedSeq=w,t.IndexedSeq=x,t.SetSeq=I,t.ArraySeq=j,t.isSeq=M,t.keyedSeqFromValue=k,t.indexedSeqFromValue=R});