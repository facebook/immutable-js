/**
 *  Copyright (c) 2014-2015, Facebook, Inc.
 *  All rights reserved.
 *
 *  This source code is licensed under the BSD-style license found in the
 *  LICENSE file in the root directory of this source tree. An additional grant
 *  of patent rights can be found in the PATENTS file in the same directory.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Range={})}(this,function(t){"use strict";function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function r(t){return void 0===t.size&&(t.size=t.__iterate(i)),t.size}function n(t,e){if("number"!=typeof e){var n=+e;if(""+n!==e)return NaN;e=n}return 0>e?r(t)+e:e}function i(){return!0}function o(t,e,r){return(0===t||void 0!==r&&-r>=t)&&(void 0===e||void 0!==r&&e>=r)}function u(t,e){return a(t,e,0)}function s(t,e){return a(t,e,e)}function a(t,e,r){return void 0===t?r:0>t?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function f(t){return p(t)?t:m(t)}function c(t){return y(t)?t:I(t)}function h(t){return v(t)?t:M(t)}function _(t){return p(t)&&!d(t)?t:R(t)}function p(t){return!(!t||!t[F])}function y(t){return!(!t||!t[G])}function v(t){return!(!t||!t[H])}function d(t){return y(t)||v(t)}function l(t){return!(!t||!t[J])}function S(t){this.next=t}function g(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function b(){return{value:void 0,done:!0}}function E(t){return!!x(t)}function w(t){return t&&"function"==typeof t.next}function z(t){var e=x(t);return e&&e.call(t)}function x(t){var e=t&&(tt&&t[tt]||t[et]);return"function"==typeof e?e:void 0}function q(t){return t&&"number"==typeof t.length}function m(t){return null===t||void 0===t?k():p(t)?t.toSeq():B(t)}function I(t){return null===t||void 0===t?k().toKeyedSeq():p(t)?y(t)?t.toSeq():t.fromEntrySeq():K(t)}function M(t){return null===t||void 0===t?k():p(t)?y(t)?t.entrySeq():t.toIndexedSeq():L(t)}function R(t){return(null===t||void 0===t?k():p(t)?y(t)?t.entrySeq():t:L(t)).toSetSeq()}function j(t){this._array=t,this.size=t.length}function A(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function U(t){this._iterable=t,this.size=t.length||t.size}function O(t){this._iterator=t,this._iteratorCache=[]}function T(t){return!(!t||!t[nt])}function k(){return it||(it=new j([]));
}function K(t){var e=Array.isArray(t)?new j(t).fromEntrySeq():w(t)?new O(t).fromEntrySeq():E(t)?new U(t).fromEntrySeq():"object"==typeof t?new A(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function L(t){var e=D(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function B(t){var e=D(t)||"object"==typeof t&&new A(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function D(t){return q(t)?new j(t):w(t)?new O(t):E(t)?new U(t):void 0}function C(t,e,r,n){var i=t._cache;if(i){for(var o=i.length-1,u=0;o>=u;u++){var s=i[r?o-u:u];if(e(s[1],n?s[0]:u,t)===!1)return u+1}return u}return t.__iterateUncached(e,r)}function N(t,e,r,n){var i=t._cache;if(i){var o=i.length-1,u=0;return new S(function(){var t=i[r?o-u:u];return u++>o?b():g(e,n?t[0]:u-1,t[1])})}return t.__iteratorUncached(e,r)}function Y(t,e){if(!t)throw Error(e)}function P(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return"function"==typeof t.equals&&"function"==typeof e.equals&&t.equals(e)?!0:!1}function Q(t,e){if(t===e)return!0;if(!p(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||y(t)!==y(e)||v(t)!==v(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!d(t);if(l(t)){var n=t.entries();return e.every(function(t,e){var i=n.next().value;return i&&P(i[1],t)&&(r||P(i[0],e))})&&n.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var u=!0,s=e.__iterate(function(e,n){return(r?t.has(e):i?P(e,t.get(n,X)):P(t.get(n,X),e))?void 0:(u=!1,!1)});return u&&t.size===s}function V(t,e,r){if(!(this instanceof V))return new V(t,e,r);if(Y(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),
t>e&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(ot)return ot;ot=this}}var X={};e(c,f),e(h,f),e(_,f),f.isIterable=p,f.isKeyed=y,f.isIndexed=v,f.isAssociative=d,f.isOrdered=l,f.Keyed=c,f.Indexed=h,f.Set=_;var F="@@__IMMUTABLE_ITERABLE__@@",G="@@__IMMUTABLE_KEYED__@@",H="@@__IMMUTABLE_INDEXED__@@",J="@@__IMMUTABLE_ORDERED__@@",W=0,Z=1,$=2,tt="function"==typeof Symbol&&Symbol.iterator,et="@@iterator",rt=tt||et;S.prototype.toString=function(){return"[Iterator]"},S.KEYS=W,S.VALUES=Z,S.ENTRIES=$,S.prototype.inspect=S.prototype.toSource=function(){return""+this},S.prototype[rt]=function(){return this},e(m,f),m.of=function(){return m(arguments)},m.prototype.toSeq=function(){return this},m.prototype.toString=function(){return this.__toString("Seq {","}")},m.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},m.prototype.__iterate=function(t,e){return C(this,t,e,!0)},m.prototype.__iterator=function(t,e){return N(this,t,e,!0)},e(I,m),I.prototype.toKeyedSeq=function(){return this},e(M,m),M.of=function(){return M(arguments)},M.prototype.toIndexedSeq=function(){return this},M.prototype.toString=function(){return this.__toString("Seq [","]")},M.prototype.__iterate=function(t,e){return C(this,t,e,!1)},M.prototype.__iterator=function(t,e){return N(this,t,e,!1)},e(R,m),R.of=function(){return R(arguments)},R.prototype.toSetSeq=function(){return this},m.isSeq=T,m.Keyed=I,m.Set=R,m.Indexed=M;var nt="@@__IMMUTABLE_SEQ__@@";m.prototype[nt]=!0,e(j,M),j.prototype.get=function(t,e){return this.has(t)?this._array[n(this,t)]:e},j.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,i=0;n>=i;i++)if(t(r[e?n-i:i],i,this)===!1)return i+1;return i},j.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,i=0;return new S(function(){return i>n?b():g(t,i,r[e?n-i++:i++])})},e(A,I),A.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},A.prototype.has=function(t){
return this._object.hasOwnProperty(t)},A.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length-1,o=0;i>=o;o++){var u=n[e?i-o:o];if(t(r[u],u,this)===!1)return o+1}return o},A.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length-1,o=0;return new S(function(){var u=n[e?i-o:o];return o++>i?b():g(t,u,r[u])})},A.prototype[J]=!0,e(U,M),U.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=this._iterable,n=z(r),i=0;if(w(n))for(var o;!(o=n.next()).done&&t(o.value,i++,this)!==!1;);return i},U.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterable,n=z(r);if(!w(n))return new S(b);var i=0;return new S(function(){var e=n.next();return e.done?e:g(t,i++,e.value)})},e(O,M),O.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,n=this._iteratorCache,i=0;n.length>i;)if(t(n[i],i++,this)===!1)return i;for(var o;!(o=r.next()).done;){var u=o.value;if(n[i]=u,t(u,i++,this)===!1)break}return i},O.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,i=0;return new S(function(){if(i>=n.length){var e=r.next();if(e.done)return e;n[i]=e.value}return g(t,i,n[i++])})};var it;e(V,M),V.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},V.prototype.get=function(t,e){return this.has(t)?this._start+n(this,t)*this._step:e},V.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&this.size>e&&e===Math.floor(e)},V.prototype.slice=function(t,e){return o(t,e,this.size)?this:(t=u(t,this.size),e=s(e,this.size),t>=e?new V(0,0):new V(this.get(t,this._end),this.get(e,this._end),this._step))},V.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var r=e/this._step;if(r>=0&&this.size>r)return r}return-1},V.prototype.lastIndexOf=function(t){return this.indexOf(t);
},V.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;r>=o;o++){if(t(i,o,this)===!1)return o+1;i+=e?-n:n}return o},V.prototype.__iterator=function(t,e){var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,o=0;return new S(function(){var u=i;return i+=e?-n:n,o>r?b():g(t,o++,u)})},V.prototype.equals=function(t){return t instanceof V?this._start===t._start&&this._end===t._end&&this._step===t._step:Q(this,t)};var ot;t.Range=V});